@import 'tailwindcss';

@layer base {
	html {
		color-scheme: light;
	}

	html.dark {
		color-scheme: dark;
	}

	body {
		font-family: 'Inter', 'Inter Tight', ui-sans-serif, system-ui, -apple-system,
			BlinkMacSystemFont, 'Segoe UI', sans-serif;
		@apply bg-slate-50 text-gray-900 transition-colors duration-300;
	}

	html.dark body {
		@apply bg-slate-950 text-slate-100;
	}

	#app {
		@apply grid gap-4 p-6 h-full transition-colors duration-300;
		grid-template-columns: minmax(0, 320px) minmax(0, 1fr) minmax(0, 360px);
	}

	#app[data-sidebar-collapsed='true'] {
		grid-template-columns: 72px minmax(0, 1fr) minmax(0, 360px);
	}

	#app[data-form-visible='false'] {
		grid-template-columns: minmax(0, 320px) minmax(0, 1fr);
	}

	#app[data-sidebar-collapsed='true'][data-form-visible='false'] {
		grid-template-columns: 72px minmax(0, 1fr);
	}

	html.dark #app {
		@apply bg-slate-950;
	}
}

@layer components {
	#sidebar[data-collapsed='true'] {
		@apply px-3 py-4 bg-white shadow-sm;
		min-width: 72px;
		max-width: 72px;
	}

	#sidebar[data-collapsed='true'] .sidebar-header {
		@apply justify-center;
	}

	#sidebar[data-collapsed='true'] .sidebar-title {
		@apply hidden;
	}

	#sidebar[data-collapsed='true'] .sidebar-hideable {
		@apply hidden;
	}

	.task-card {
		@apply relative rounded-lg border border-gray-200 bg-white px-3 py-2 shadow-sm transition hover:border-emerald-300;
		transition: transform 120ms ease, box-shadow 140ms ease, border-color 120ms ease;
	}

	#app[data-density='compact'] .task-card {
		@apply px-2 py-1;
	}

	#app[data-density='compact'] #taskList {
		@apply space-y-1;
	}

	#app:not([data-form-visible='false']) #formAside {
		@apply transition-colors duration-300;
	}

	html.dark #sidebar {
		@apply bg-slate-900 text-slate-100 border border-slate-700;
	}

	html.dark #sidebar button {
		@apply text-slate-200 hover:text-white;
	}

	html.dark #sidebar input,
	html.dark #sidebar select {
		@apply bg-slate-900 border-slate-700 text-slate-100 placeholder:text-slate-400;
	}

	html.dark .task-card {
		@apply border-slate-700 bg-slate-800 text-slate-100 hover:border-emerald-400;
		box-shadow: 0 10px 24px -20px rgba(15, 118, 110, 0.6);
	}

	html.dark .task-card span {
		color: inherit;
	}

	html.dark #settingsModal > div:nth-child(2) {
		@apply bg-slate-900 text-slate-100;
	}

	html.dark #settingsModal button {
		@apply text-slate-100;
	}

	html.dark #settingsModal select,
	html.dark #settingsModal input {
		@apply bg-slate-800 border-slate-700 text-slate-100;
	}

	html.dark #settingsCategoriesList li {
		@apply border-slate-700 bg-slate-800 text-slate-100;
	}

	html.dark #formAside {
		@apply bg-slate-900 text-slate-100;
	}

	html.dark #formAside input,
	html.dark #formAside textarea,
	html.dark #formAside select {
		@apply bg-slate-800 border-slate-700 text-slate-100 placeholder:text-slate-400;
	}

	html.dark #stats section > div,
	html.dark #stats .rounded-xl {
		@apply bg-slate-900 text-slate-100 border-slate-700;
	}
}

.task-card:hover {
	box-shadow: 0 18px 30px -18px rgba(15, 118, 110, 0.35);
	transform: translateY(-2px);
}

.task-card.is-checking {
	animation: task-check-pulse 120ms ease forwards;
}

.task-card[data-status='overdue'] {
	border-color: #f87171;
	box-shadow: 0 12px 26px -18px rgba(248, 113, 113, 0.45);
}

.task-card[data-status='overdue'] .status-chip {
	background: linear-gradient(135deg, #f87171, #fb7185);
	color: #fff;
}

.task-card[data-selected='true'] {
	outline: 2px solid rgba(16, 185, 129, 0.35);
	outline-offset: 2px;
}

.priority-badge {
	background-color: #ffa445;
	color: #fff;
	border-radius: 6px;
	padding: 0.125rem 0.5rem;
	font-size: 11px;
	font-weight: 600;
}

.status-chip {
	border-radius: 6px;
	padding: 0.125rem 0.5rem;
	font-size: 11px;
	font-weight: 600;
	display: inline-flex;
	align-items: center;
	gap: 0.25rem;
	color: #fff;
}

.status-chip--pending {
	background: linear-gradient(135deg, #0284c7, #0ea5e9);
}

.status-chip--in-progress {
	background: linear-gradient(135deg, #6366f1, #8b5cf6);
}

.status-chip--completed {
	background: linear-gradient(135deg, #10b981, #22c55e);
}

.status-chip--overdue {
	background: linear-gradient(135deg, #f43f5e, #ef4444);
}

#todaySection {
	backdrop-filter: blur(6px);
}

#todaySection li {
	@apply rounded-lg border border-emerald-100 bg-white/90 px-3 py-3 text-sm text-gray-700 shadow-sm transition hover:border-emerald-300 dark:border-emerald-900 dark:bg-slate-900/70 dark:text-slate-200;
}

#todaySection li.overdue {
	border-color: #f87171;
	background-color: rgba(254, 226, 226, 0.75);
	color: #b91c1c;
}

#todaySection li .today-meta {
	@apply text-xs text-gray-500 dark:text-slate-400;
}

#undoToast.show {
	display: block;
	animation: toast-in 160ms ease forwards;
}

#undoToast.hide {
	animation: toast-out 160ms ease forwards;
}

.progress-bar {
	transition: width 300ms ease-out;
}

[data-tooltip] {
	position: relative;
}

[data-tooltip]::after {
	content: attr(data-tooltip);
	position: absolute;
	inset-inline-start: 50%;
	inset-block-end: calc(100% + 6px);
	transform: translateX(-50%);
	background: rgba(17, 24, 39, 0.92);
	color: #fff;
	padding: 0.25rem 0.5rem;
	border-radius: 6px;
	font-size: 10px;
	font-weight: 500;
	line-height: 1;
	opacity: 0;
	visibility: hidden;
	transition: opacity 120ms ease, transform 120ms ease;
	white-space: nowrap;
	pointer-events: none;
	z-index: 20;
}

[data-tooltip]:hover::after,
[data-tooltip]:focus-visible::after {
	opacity: 1;
	visibility: visible;
	transform: translate(-50%, -2px);
}

@keyframes task-check-pulse {
	0% {
		transform: scale(1);
		opacity: 1;
	}
	50% {
		transform: scale(1.1);
		opacity: 0.92;
	}
	100% {
		transform: scale(1);
		opacity: 1;
	}
}

@keyframes toast-in {
	0% {
		transform: translate(-50%, 16px);
		opacity: 0;
	}
	100% {
		transform: translate(-50%, 0);
		opacity: 1;
	}
}

@keyframes toast-out {
	0% {
		transform: translate(-50%, 0);
		opacity: 1;
	}
	100% {
		transform: translate(-50%, 16px);
		opacity: 0;
	}
}

html.dark #sidebar {
	@apply bg-slate-900 text-slate-100 border border-slate-700;
}

html.dark #sidebar button {
	@apply text-slate-200 hover:text-white hover:bg-slate-800;
}

html.dark #sidebar .sidebar-hideable input,
html.dark #sidebar .sidebar-hideable select,
html.dark #sidebar .sidebar-hideable button {
	@apply border-slate-700 bg-slate-800 text-slate-100;
}

html.dark #taskSection {
	@apply text-slate-100;
}

html.dark #taskSection #tasksViewTitle {
	@apply text-slate-200;
}

html.dark #taskList li {
	@apply text-slate-100;
}

html.dark #stats .tracking-wide {
	@apply text-slate-300;
}

html.dark #stats section > div,
html.dark #stats .rounded-xl,
html.dark #stats .border-dashed {
	@apply border-slate-700 bg-slate-900 text-slate-100;
}

html.dark #stats .border-gray-100 {
	@apply border-slate-700;
}

html.dark #stats .text-gray-700 {
	@apply text-slate-200;
}

@layer utilities {
 /* reserved for future custom utilities */
}
